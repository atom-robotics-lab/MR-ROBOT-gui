<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/easeljs@1/lib/easeljs.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/eventemitter2@6/lib/eventemitter2.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/roslib@1/build/roslib.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/ros2d@0/build/ros2d.min.js"></script>
<script type="text/javascript" src="/home/aryan/MR-ROBOT-gui/nav2djs/src/Navigator.js"></script>

<script type="text/javascript" type="text/javascript">
  function init() {
    var ros = new ROSLIB.Ros({
      url : 'ws://localhost:9090'
    });

    var viewer = new ROS2D.Viewer({
      divID : 'map',
      width : 600,
      height : 500
    });

    var gridClient = new ROS2D.OccupancyGridClient({
      ros : ros,
      rootObject : viewer.scene
    });

    // Wait for the gridClient to be fully initialized before scaling
    gridClient.on('change', function(){
      viewer.scaleToDimensions(gridClient.currentGrid.width, gridClient.currentGrid.height);
    });

    // Connect to ROS after setting up the gridClient
    ros.on('connection', function() {
      // This is where you might want to subscribe to other topics or perform other operations
      console.log('Connected to ROS');
    });

    ros.on('error', function(error) {
      console.error('Error connecting to ROS: ', error);
    });

    ros.on('close', function() {
      console.log('Connection to ROS closed');
    });
  
  var nav = NAV2D.OccupancyGridClientNav({
      ros : ros,
      topic : '/map',
      rootObject : viewer.scene,
      viewer : viewer,
      serverName : '/move_base'
    });
    var nav2 = NAV2D.OccupancyGridClientNav({
      ros : ros,
      topic : '/map',
      rootObject : viewer.scene,
      viewer : viewer,
      serverName : '/move_base'
    });
  }
</script>
</head>

<body onload="init()">
  <h1>Simple Map Example</h1>
  <div id="map" style="height: 600px; width: 500px;""></div>
</body>
</html>